# 1ë‹¨ê³„: ë¹Œë“œ ìŠ¤í…Œì´ì§€ (Gradle í™˜ê²½)
FROM gradle:8.5-jdk17 AS build
WORKDIR /app
COPY . .
# ğŸ¯ ì—¬ê¸°ì„œ ì§ì ‘ jarë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤. (testëŠ” ì œì™¸í•´ì„œ ì†ë„ ì—…)
RUN ./gradlew clean build -x test

# 2ë‹¨ê³„: ì‹¤í–‰ ìŠ¤í…Œì´ì§€ (ê°€ë²¼ìš´ JRE í™˜ê²½)
FROM eclipse-temurin:17-jdk-alpine
WORKDIR /app
# ğŸ¯ 1ë‹¨ê³„ì—ì„œ ë§Œë“  jar íŒŒì¼ë§Œ ì™ ê°€ì ¸ì˜µë‹ˆë‹¤.
COPY --from=build /app/build/libs/*.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]